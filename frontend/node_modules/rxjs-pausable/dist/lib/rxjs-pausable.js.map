{"version":3,"file":"rxjs-pausable.js","sources":["../../src/rxjs-pausable.ts"],"sourcesContent":["import { Observable, NEVER, BehaviorSubject } from 'rxjs'\nimport { switchMap, materialize, dematerialize } from 'rxjs/operators'\n\nexport class PausableObservable<T> extends Observable<T> {\n  private pauser: BehaviorSubject<boolean>\n\n  pause() {\n    this.pauser.next(true)\n  }\n\n  resume() {\n    this.pauser.next(false)\n  }\n}\n\nexport function pausable() {\n  return function pauseFn<T>(source: Observable<T>) {\n    const pausableProto = PausableObservable.prototype\n\n    const pauser = new BehaviorSubject(false)\n    const newSource = pauser.pipe(\n      switchMap(paused => (paused ? NEVER : source.pipe(materialize()))),\n      dematerialize()\n    )\n\n    const pausable: any = Object.create(newSource, {\n      pause: { value: pausableProto.pause },\n      resume: { value: pausableProto.resume },\n      pauser: { value: pauser }\n    })\n    return pausable as PausableObservable<T>\n  }\n}\n"],"names":["tslib_1.__extends"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAG2CA,sCAAa;IAAxD;;KAUC;IAPC,kCAAK,GAAL;QACE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;KACvB;IAED,mCAAM,GAAN;QACE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;KACxB;IACH,yBAAC;CAVD,CAA2C,UAAU,GAUpD;SAEe,QAAQ;IACtB,OAAO,SAAS,OAAO,CAAI,MAAqB;QAC9C,IAAM,aAAa,GAAG,kBAAkB,CAAC,SAAS,CAAA;QAElD,IAAM,MAAM,GAAG,IAAI,eAAe,CAAC,KAAK,CAAC,CAAA;QACzC,IAAM,SAAS,GAAG,MAAM,CAAC,IAAI,CAC3B,SAAS,CAAC,UAAA,MAAM,IAAI,QAAC,MAAM,GAAG,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,IAAC,CAAC,EAClE,aAAa,EAAE,CAChB,CAAA;QAED,IAAM,QAAQ,GAAQ,MAAM,CAAC,MAAM,CAAC,SAAS,EAAE;YAC7C,KAAK,EAAE,EAAE,KAAK,EAAE,aAAa,CAAC,KAAK,EAAE;YACrC,MAAM,EAAE,EAAE,KAAK,EAAE,aAAa,CAAC,MAAM,EAAE;YACvC,MAAM,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE;SAC1B,CAAC,CAAA;QACF,OAAO,QAAiC,CAAA;KACzC,CAAA;CACF;;;;"}